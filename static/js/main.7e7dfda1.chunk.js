(this["webpackJsonpstore-gonzalez-zuleimi"]=this["webpackJsonpstore-gonzalez-zuleimi"]||[]).push([[0],{40:function(e,t,r){},41:function(e,t,r){},51:function(e,t,r){"use strict";r.r(t);var c=r(0),n=r(1),s=r.n(n),a=r(19),o=r.n(a),i=(r(40),r(13)),d=r(5),u=(r(41),r(12)),l=r(6),j=r.n(l),b=r(11),O={"Content-Type":"application/json","Access-Control-Allow-Origin":"*",Authorization:"Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJfaWQiOiI1ZWRkOWU5OTQ0NGZlNDAwNmRhOTkyNGQiLCJpYXQiOjE1OTE1ODIzNjF9.-f40dyUIGFsBSB_PTeBGdSLI58I21-QBJNi9wkODcKk"},h=function(e){return{type:"LOAD_USER_FAILED",error:e}},p=function(e){var t=e.loadUser,r=e.user,s=e.points,a=e.message;return Object(n.useEffect)((function(){t()}),[t,s,a]),Object(c.jsxs)("header",{className:"header",children:[Object(c.jsx)(i.b,{style:{display:"inline-flex"},to:"/rewards-store/",children:Object(c.jsx)("img",{src:"/rewards-store/aerolab-logo.svg",alt:"Aerolab Logo"})}),Object(c.jsxs)("div",{className:"user-info",children:[Object(c.jsx)("div",{className:"user-name",children:Object(c.jsx)("p",{children:r.name})}),Object(c.jsxs)("div",{className:"user-icons",children:[Object(c.jsx)("div",{className:"user-points",children:Object(c.jsx)("span",{children:r.points})}),Object(c.jsx)(i.b,{to:"/rewards-store/",children:Object(c.jsxs)("div",{className:"tooltip",children:[Object(c.jsx)("img",{src:"/rewards-store/bag.png",alt:"List"}),Object(c.jsx)("h3",{className:"tooltex",children:"Product List  "})]})}),Object(c.jsx)(i.b,{to:"/rewards-store/points",children:Object(c.jsxs)("div",{className:"tooltip",children:[Object(c.jsx)("img",{src:"/rewards-store/money.png",alt:"Coins"}),Object(c.jsx)("h3",{className:"tooltex",children:"Add Points"})]})}),Object(c.jsx)(i.b,{to:"/rewards-store/history",children:Object(c.jsxs)("div",{className:"tooltip",children:[Object(c.jsx)("img",{src:"/rewards-store/carts.png",alt:"Buy"}),Object(c.jsx)("h3",{className:"tooltex",children:"View History"})]})})]})]})]})},g=Object(u.b)((function(e){return{user:e.user_reducer.user,points:e.points_reducer.points,message:e.points_reducer.message}}),(function(e){return{loadUser:function(){return e(function(){var e=Object(b.a)(j.a.mark((function e(t){var r,c;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("https://coding-challenge-api.aerolab.co/user/me",{method:"GET",mode:"cors",headers:O});case 2:return r=e.sent,e.next=5,r.json();case 5:c=e.sent;try{t({type:"LOAD_USER_SUCCESS",loadUser:c})}catch(n){t(h(n))}case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}}}))(p),m=function(e){var t=e.title,r=e.background;return Object(c.jsx)("div",{className:"banner",style:{backgroundImage:r?"url(".concat(r,")"):"url(".concat("/rewards-store","/header-x1.png)")},children:Object(c.jsx)("div",{className:"b-container",children:Object(c.jsx)("h1",{className:"b-title",children:t})})})},x=function(e){return{type:"LOAD_PRODUCT_FAILED",error:e}},f=function(e){return{type:"LOAD_PRODUCT_SUCCESS",loadProduct:e}},v=function(e,t){return{type:"LOAD_ORDERED_PRODUCTS",orderedProduct:e,orderby:t}},y=function(e){return{type:"ADD_POINTS_FAILED",error:e}},N=function(e){return{type:"REDEEM_POINTS_FAILED",error:e}},_=r(17);var S=function(e){var t=e.category,r=e.cost,n=e.img,s=e.name,a=e.points,o=e.redeemPoints,i=Object(d.f)(),u=n.split("/");return Object(c.jsx)("div",{className:"grid-item",children:Object(c.jsxs)("div",{className:"card",children:[Object(c.jsx)("img",{className:"card-image",src:"/rewards-store/product-pics/"+u[u.length-1],alt:s}),Object(c.jsx)("hr",{}),Object(c.jsxs)("div",{className:"card-content",children:[Object(c.jsx)("p",{className:"card-category",children:t}),Object(c.jsx)("p",{className:"card-name",children:s})]}),a>=r?Object(c.jsx)("div",{className:"card-redeem",children:Object(c.jsxs)(c.Fragment,{children:[Object(c.jsxs)("div",{className:"card-price",children:[Object(c.jsx)("div",{className:"card-cost",children:Object(c.jsx)("span",{children:r})}),Object(c.jsx)("img",{src:"/rewards-store/icons/coin.svg",alt:"Coins"})]}),Object(c.jsx)("button",{className:"card-button",onClick:o,children:"Redeem"})]})}):null,a>=r?Object(c.jsx)("img",{className:"card-buy",src:"/rewards-store/icons/buy-blue.svg",alt:"Buy"}):Object(c.jsxs)("div",{className:"card-missing-coins",children:[Object(c.jsxs)("div",{className:"card-price",children:[Object(c.jsx)("div",{className:"card-cost",children:Object(c.jsx)("span",{children:r})}),Object(c.jsx)("img",{src:"/rewards-store/icons/coin.svg",alt:"Coins"})]}),Object(c.jsx)("button",{className:"card-missing-button",onClick:function(){return i.push("/rewards-store/points")},children:"Missing"})]})]})})},P=function(e){var t=e.products;return Object(c.jsxs)("div",{className:"grid-pagination",children:[Object(c.jsx)("button",{className:"grid-pagination-button",onClick:function(){return t.prev()},children:Object(c.jsx)("img",{src:"/rewards-store/icons/arrow-left.svg",alt:"Previous Page"})}),Object(c.jsx)("button",{className:"grid-pagination-button",onClick:function(){return t.next()},children:Object(c.jsx)("img",{src:"/rewards-store/icons/arrow-right.svg",alt:"Next Page"})})]})};var D=function(e,t){var r=Object(n.useState)(1),c=Object(_.a)(r,2),s=c[0],a=c[1],o=Math.ceil(e.length/t);return{next:function(){a((function(){return Math.min(s+1,o)}))},prev:function(){a((function(){return Math.max(s-1,1)}))},jump:function(e){var t=Math.max(1,e);a((function(){return Math.min(t,o)}))},currentData:function(){var r=(s-1)*t,c=r+t;return e.slice(r,c)},currentPage:s,maxPage:o}},E=function(e){var t=e.product,r=e.orderProducts;return Object(c.jsxs)(c.Fragment,{children:[Object(c.jsx)("span",{className:"p-sortby",children:"Sort By:"}),Object(c.jsx)("div",{className:"grid-item",children:Object(c.jsx)("button",{className:"p-button",onClick:function(){return r(t,"category")},children:"Category"})}),Object(c.jsx)("div",{className:"grid-item",children:Object(c.jsx)("button",{className:"p-button",onClick:function(){return r(t,"lowestprice")},children:"Lowest Price"})}),Object(c.jsx)("div",{className:"grid-item",children:Object(c.jsx)("button",{className:"p-button",onClick:function(){return r(t,"highestprice")},children:"Highest Price"})})]})},C=function(e){var t=e.totalProducts,r=e.currentPage,n=e.totalByPage;return Object(c.jsxs)("span",{className:"p-count",children:[n*r," of ",t," products"]})},w=r(28),I=r(29),L=r(21),R=r(34),A=r(33),T=function(e){Object(R.a)(r,e);var t=Object(A.a)(r);function r(e){var c;return Object(w.a)(this,r),(c=t.call(this,e)).onClose=function(e){c.props.onClose(e)},c.onClose=c.onClose.bind(Object(L.a)(c)),c}return Object(I.a)(r,[{key:"render",value:function(){return this.props.show?Object(c.jsx)("div",{className:"modal",children:Object(c.jsxs)("div",{className:"card-modal",children:[Object(c.jsx)("div",{className:"card-content",children:Object(c.jsx)("p",{className:"card-name",children:this.props.message})}),Object(c.jsx)("div",{className:"card-price",children:Object(c.jsx)("button",{className:"card-button modal-button",onClick:this.onClose,children:"Close"})})]})}):null}}]),r}(s.a.Component),U=r(30),k=r(31),B=function(){return Object(c.jsx)("div",{className:"load-container",children:Object(c.jsx)(U.a,{className:"load rotating",icon:k.a})})},F=function(e){var t=e.loadProduct,r=e.products,s=e.user,a=e.productsByPage,o=e.orderProduct,i=e.redeemProduct,d=e.point,u=e.isLoading,l=(e.userLoading,Object(n.useState)(!1)),j=Object(_.a)(l,2),b=j[0],O=j[1],h=Object(n.useState)(""),p=Object(_.a)(h,2),g=p[0],m=p[1];Object(n.useEffect)((function(){t(),""!==d.message?(O(!0),d.message.error?m(d.message.error):d.message.message&&m(d.message.message)):O(!1)}),[t,d.message,s.points]);var x=D(r,a),f=x.currentData();return u?Object(c.jsx)(B,{}):Object(c.jsxs)("div",{children:[Object(c.jsx)(T,{show:b,onClose:function(){O(!1),d.message=""},message:g}),Object(c.jsxs)("div",{className:"p-header",children:[Object(c.jsx)(C,{totalProducts:r.length,currentPage:x.currentPage,totalByPage:a}),Object(c.jsx)(E,{product:r,orderProducts:o}),Object(c.jsx)(P,{products:x})]}),Object(c.jsxs)("div",{className:"grid-container",children:[f.map((function(e,t){var r=e._id,n=e.category,a=e.cost,o=e.img,d=e.name;return Object(c.jsx)(S,{_id:r,category:n,cost:a,img:o.url,name:d,points:s.points,redeemPoints:function(){return i(r)}},d+t)})),";"]})]})},H=Object(u.b)((function(e){return{products:e.product_reducer.product,user:e.user_reducer.user,productsByPage:16,point:e.points_reducer,orderby:e.product_reducer.orderby,isLoading:e.product_reducer.loading,userLoading:e.user_reducer.loading}}),(function(e){return{loadProduct:function(t){return e(function(){var e=Object(b.a)(j.a.mark((function e(t){var r,c;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("https://coding-challenge-api.aerolab.co/products",{method:"GET",mode:"cors",headers:O});case 2:return r=e.sent,e.next=5,r.json();case 5:c=e.sent;try{t(f(c))}catch(n){t(x(n))}case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())},orderProduct:function(t,r){return e((c=t,n=r,function(){var e=Object(b.a)(j.a.mark((function e(t){var r;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=c,""!==n&&(r.sort((function(e,t){return"category"===n?e.category>t.category?1:-1:"lowestprice"===n?e.cost>t.cost?1:-1:"highestprice"===n?e.cost<t.cost?1:-1:r})),t(v(r,n)));try{t(f(r))}catch(s){t(x(s))}case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));var c,n},redeemProduct:function(t){return e(function(e){return function(){var t=Object(b.a)(j.a.mark((function t(r){var c,n;return j.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fetch("https://coding-challenge-api.aerolab.co/redeem",{method:"POST",mode:"cors",headers:O,body:JSON.stringify({productId:e})});case 2:return c=t.sent,t.next=5,c.json();case 5:n=t.sent;try{r({type:"REDEEM_POINTS_SUCCESS",redeemed:n})}catch(s){r(N(s))}case 7:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}(t))}}}))(F),G=function(){return Object(c.jsxs)("div",{children:[Object(c.jsx)(g,{}),Object(c.jsx)(m,{title:"Product List"}),Object(c.jsx)(H,{})]})},M=function(e){var t=e.addPoints;e.points;return e.isLoading?Object(c.jsx)(B,{}):Object(c.jsx)(c.Fragment,{children:Object(c.jsxs)("div",{className:"grid-container",children:[Object(c.jsx)("div",{className:"grid-item",children:Object(c.jsx)("button",{className:"p-button",onClick:function(){return t(1e3)},children:"1000"})}),Object(c.jsx)("div",{className:"grid-item",children:Object(c.jsx)("button",{className:"p-button",onClick:function(){return t(5e3)},children:"5000"})}),Object(c.jsx)("div",{className:"grid-item",children:Object(c.jsx)("button",{className:"p-button",onClick:function(){return t(7500)},children:"7500"})})]})})},J=Object(u.b)((function(e){return{points:e.points_reducer,isLoading:e.user_reducer.loading}}),(function(e){return{addPoints:function(t){return e(function(e){return function(){var t=Object(b.a)(j.a.mark((function t(r){var c,n;return j.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fetch("https://coding-challenge-api.aerolab.co/user/points",{method:"POST",mode:"cors",headers:O,body:JSON.stringify({amount:e})});case 2:return c=t.sent,t.next=5,c.json();case 5:n=t.sent;try{r({type:"ADD_POINTS_SUCCESS",loadPoints:n})}catch(s){r(y(s))}case 7:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}(t))}}}))(M),z=function(){return Object(c.jsxs)("div",{children:[Object(c.jsx)(g,{}),Object(c.jsx)(m,{title:"Add Points"}),Object(c.jsx)(J,{})]})},Y=function(e){return{type:"LOAD_HISTORY_FAILED",error:e}},Q=function(e){return{type:"LOAD_HISTORY_SUCCESS",loadHistory:e}},W=function(e,t){return{type:"LOAD_HISTORY_PRODUCTS",orderedProduct:e,orderby:t}};var V=function(e){var t=e.category,r=e.img,n=e.name,s=r.split("/");return Object(c.jsx)("div",{className:"grid-item",children:Object(c.jsxs)("div",{className:"card",children:[Object(c.jsx)("img",{className:"card-image",src:"/rewards-store/product-pics/"+s[s.length-1],alt:n}),Object(c.jsx)("hr",{}),Object(c.jsxs)("div",{className:"card-content",children:[Object(c.jsx)("p",{className:"card-category",children:t}),Object(c.jsx)("p",{className:"card-name",children:n})]})]})})},X=function(e){var t=e.loadHistory,r=e.products,s=e.productsByPage,a=e.isLoading,o=e.orderProduct;Object(n.useEffect)((function(){t()}),[t]);var i=D(r,s),d=i.currentData();return a?Object(c.jsx)(B,{}):Object(c.jsxs)("div",{children:[Object(c.jsxs)("div",{className:"p-header",children:[Object(c.jsx)(C,{totalProducts:r.length,currentPage:i.currentPage,totalByPage:s}),Object(c.jsx)(E,{product:r,orderProducts:o}),Object(c.jsx)(P,{products:i})]}),Object(c.jsxs)("div",{className:"grid-container",children:[d.map((function(e,t){var r=e._id,n=e.category,s=e.img,a=e.name;return Object(c.jsx)(V,{_id:r,category:n,img:s.url,name:a},a+t)})),";"]})]})},Z=Object(u.b)((function(e){return{products:e.history_reducer.history,productsByPage:16,isLoading:e.history_reducer.loading,orderby:e.history_reducer.orderby}}),(function(e){return{loadHistory:function(){return e(function(){var e=Object(b.a)(j.a.mark((function e(t){var r,c;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("https://coding-challenge-api.aerolab.co/user/history",{method:"GET",mode:"cors",headers:O});case 2:return r=e.sent,e.next=5,r.json();case 5:c=e.sent;try{t(Q(c))}catch(n){t(Y(n))}case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())},orderProduct:function(t,r){return e((c=t,n=r,function(){var e=Object(b.a)(j.a.mark((function e(t){var r;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=c,""!==n&&(r.sort((function(e,t){return"category"===n?e.category>t.category?1:-1:"lowestprice"===n?e.cost>t.cost?1:-1:"highestprice"===n?e.cost<t.cost?1:-1:r})),t(W(r,n)));try{t(Q(r))}catch(s){t(Y(s))}case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));var c,n}}}))(X),K=function(){return Object(c.jsxs)("div",{children:[Object(c.jsx)(g,{}),Object(c.jsx)(m,{title:"Product History"}),Object(c.jsx)(Z,{})]})},q=function(){return Object(c.jsx)(i.a,{children:Object(c.jsxs)("div",{children:[Object(c.jsx)(d.c,{children:Object(c.jsx)(d.a,{exact:!0,path:"/rewards-store",component:G})}),Object(c.jsx)(d.c,{children:Object(c.jsx)(d.a,{path:"/rewards-store/points",component:z})}),Object(c.jsx)(d.c,{children:Object(c.jsx)(d.a,{path:"/rewards-store/history",component:K})})]})})},$=r(14),ee=r(2),te={user:"",loading:!1,error:null},re=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:te,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"LOAD_USER_IN_PROGRESS":return Object(ee.a)(Object(ee.a)({},e),{},{loading:!0});case"LOAD_USER_SUCCESS":return Object(ee.a)(Object(ee.a)({},e),{},{user:t.loadUser,loading:!1});case"LOAD_USER_FAILED":return Object(ee.a)(Object(ee.a)({},e),{},{error:t.error,loading:!1});default:return e}},ce={product:[],loading:!1,error:null,orderby:""},ne=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ce,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"LOAD_PRODUCT_IN_PROGRESS":return Object(ee.a)(Object(ee.a)({},e),{},{loading:!0});case"LOAD_PRODUCT_SUCCESS":return Object(ee.a)(Object(ee.a)({},e),{},{product:t.loadProduct,loading:!1});case"LOAD_PRODUCT_FAILED":return Object(ee.a)(Object(ee.a)({},e),{},{error:t.error,loading:!1});case"LOAD_ORDERED_PRODUCTS":return Object(ee.a)(Object(ee.a)({},e),{},{product:t.orderedProduct,orderby:t.orderby,loading:!1});default:return e}},se={points:"",loading:!1,error:null,message:""},ae=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:se,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"ADD_POINTS_IN_PROGRESS":return Object(ee.a)(Object(ee.a)({},e),{},{loading:!0});case"ADD_POINTS_SUCCESS":return Object(ee.a)(Object(ee.a)({},e),{},{points:t.loadPoints,message:"",loading:!1});case"ADD_POINTS_FAILED":return Object(ee.a)(Object(ee.a)({},e),{},{error:t.error,loading:!1});case"REDEEM_POINTS_IN_PROGRESS":return Object(ee.a)(Object(ee.a)({},e),{},{loading:!0});case"REDEEM_POINTS_SUCCESS":return Object(ee.a)(Object(ee.a)({},e),{},{message:t.redeemed,loading:!1});case"REDEEM_POINTS_FAILED":return Object(ee.a)(Object(ee.a)({},e),{},{error:t.error,loading:!1});default:return e}},oe={history:[],loading:!1,error:null,orderby:""},ie=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:oe,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"LOAD_HISTORY_IN_PROGRESS":return Object(ee.a)(Object(ee.a)({},e),{},{loading:!0});case"LOAD_HISTORY_SUCCESS":return Object(ee.a)(Object(ee.a)({},e),{},{history:t.loadHistory,loading:!1});case"LOAD_HISTORY_FAILED":return Object(ee.a)(Object(ee.a)({},e),{},{error:t.error,loading:!1});case"LOAD_HISTORY_PRODUCTS":return Object(ee.a)(Object(ee.a)({},e),{},{history:t.orderedProduct,orderby:t.orderby,loading:!1});default:return e}},de=Object($.c)({user_reducer:re,product_reducer:ne,points_reducer:ae,history_reducer:ie}),ue=r(32),le=function(e){return function(t){return function(r){var c;return console.groupCollapsed("dispatching",r.type),console.log("prev state: ",e.getState()),console.log("action: ",r),c=t(r),console.log("next state: ",e.getState()),console.groupEnd(),c}}},je=function(){return Object($.d)(de,Object($.a)(le,ue.a))}();o.a.render(Object(c.jsx)(s.a.StrictMode,{children:Object(c.jsx)(u.a,{store:je,children:Object(c.jsx)(q,{})})}),document.getElementById("root"))}},[[51,1,2]]]);
//# sourceMappingURL=main.7e7dfda1.chunk.js.map